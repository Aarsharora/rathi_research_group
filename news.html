<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News || Rathi Lab </title>
    <link rel="Icon" type="image/x-icon" href="assets/img/favicon.ico">
    <link rel="stylesheet" href="assets/css/news.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <!-- Navigation -->
    <div class="navigation">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="index.html"><img
                        src="assets/img/Screenshot_2025-11-12_131002-removebg-preview.png" class="img-fluid"
                        style="width: 160px;" alt=""></a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="research.html">Research</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="news.html">News</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="collabration.html">Collaboration</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="publication.html">Publication</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="team.html">Team</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="gallry.html">Gallary</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contact.html">Contact</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <div class="breadcrumb-section">
        <div class="breadcrumb-container">
            <nav class="breadcrumb-nav" aria-label="Breadcrumb">
                <a href="index.html" class="breadcrumb-item">
                    <svg class="home-icon" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
                    </svg>
                    Home
                </a>

                <span class="breadcrumb-separator">â€º</span>

                <a href="news.html" class="breadcrumb-item">
                    News
                </a>
            </nav>

            <h1 class="page-title text-center">News & Updates</h1>
            <p class="page-description text-center">Stay updated with the latest news, announcements, and achievements related to our work. This page features important updates, event highlights, project milestones, and insights into our ongoing research and activities.</p>
        </div>
    </div>
    <div class="news-container">

        <div class="news-layout">
            <!-- Headlines Sidebar -->
            <div class="headlines-sidebar">
                <h2>Headlines</h2>
                <div class="headlines-scroll" id="headlinesScroll">
                    <!-- Headlines will be duplicated for continuous scroll -->
                </div>
            </div>

            <!-- News Content -->
            <div class="news-content" id="newsContainer">
                <!-- News articles will load here dynamically -->
            </div>

            <div class="load-more">
                <button class="load-more-btn" id="loadMoreBtn">Load More News</button>
            </div>

        </div>
    </div>
    <div class="scroll-top" id="scrollTopBtn">
        <i class="fas fa-chevron-up"></i>
    </div>

    <footer class="footer-section">
        <div class="footer-content">
            <!-- Logo -->
            <div class="logo-container">
                <img class="logo-icon" src="assets/img/flask.png">

                </img>
                <div class="logo-text">Rathi Lab</div>
            </div>

            <!-- Navigation Menu -->
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="research.html">Research</a></li>
                <li><a href="publication.html">Publications</a></li>
                <li><a href="team.html">Team</a></li>
                <li><a href="gallry.html">Gallary</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>

            <!-- Email Icon -->
            <div class="email-icon">
                <a href="mailto:rathi@mit.edu" title="Email Us">
                    <i class="fas fa-envelope"></i>
                </a>
            </div>

            <!-- Bottom Section -->
            <div class="footer-bottom">
                <!-- MIT Logo -->
                <!-- Copyright -->
                <div class="copyright">
                    Â© 2025 <strong>Rathi Research Group</strong>. All rights reserved.
                    Proudly created by <strong><a href="https://arsharora.netlify.app/"
                            style="text-decoration: none; color: inherit;">Arsh Arora</strong></a>.
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="assets/js/Main.js"></script>

    <script>
        async function loadHeadlines() {
            try {
                const response = await fetch('http://localhost:5000/api/news');
                const data = await response.json();

                // Handle if data is wrapped in { success: true, data: [...] }
                const headlines = Array.isArray(data) ? data : data.data || [];

                const headlinesScroll = document.getElementById('headlinesScroll');

                if (!headlines.length) {
                    headlinesScroll.innerHTML = `<div class="headline-item">No news available at the moment.</div>`;
                    return;
                }

                // Render titles only
                const headlinesHTML = headlines
                    .map(h => `
          <div class="headline-item">
            <div class="headline-title">ðŸ“° ${h.title}</div>
          </div>
        `)
                    .join('');

                // Duplicate for seamless scroll
                headlinesScroll.innerHTML = headlinesHTML + headlinesHTML;
            } catch (error) {
                console.error('Error fetching headlines:', error);
                document.getElementById('headlinesScroll').innerHTML = `<div class="headline-item">Failed to load headlines.</div>`;
            }
        }

        // Load on page start
        loadHeadlines();
    </script>

    <script>
        // ============================================
        // Sticky Navigation on Scroll
        // ============================================
        window.addEventListener('scroll', function () {
            const navigation = document.querySelector('.navigation');

            if (window.scrollY > 200) {
                navigation.classList.add('sticky');
                document.body.style.paddingTop = navigation.offsetHeight + 'px';
            } else {
                navigation.classList.remove('sticky');
                document.body.style.paddingTop = '0';
            }
        });

        // ============================================
        // Active Page Highlight
        // ============================================
        document.addEventListener('DOMContentLoaded', function () {
            const currentPage = window.location.pathname.split('/').pop();
            const navLinks = document.querySelectorAll('.nav-link');

            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPage) {
                    link.classList.add('active');
                }
            });
        });

        // ============================================
        // Close Mobile Menu on Link Click
        // ============================================
        document.addEventListener('DOMContentLoaded', function () {
            const navLinks = document.querySelectorAll('.nav-link');
            const navbarCollapse = document.querySelector('.navbar-collapse');

            navLinks.forEach(link => {
                link.addEventListener('click', function () {
                    if (navbarCollapse.classList.contains('show')) {
                        const bsCollapse = new bootstrap.Collapse(navbarCollapse, {
                            toggle: false
                        });
                        bsCollapse.hide();
                    }
                });
            });
        });

    </script>
    <script>
        let allNews = [];
        let visibleCount = 3; // pehle 3 articles show honge

        async function loadNews() {
            try {
                const res = await fetch("http://localhost:5000/api/news");
                const data = await res.json();
                console.log("Fetched News:", data);
                allNews = data.sort((a, b) => new Date(b.date) - new Date(a.date)); // latest first
                renderNews();
            } catch (err) {
                console.error("Error fetching news:", err);
            }
        }

        function renderNews() {
            const newsContainer = document.getElementById("newsContainer");
            newsContainer.innerHTML = ""; // clear previous content

            const visibleNews = allNews.slice(0, visibleCount);

            visibleNews.forEach(item => {
                const formattedDate = new Date(item.date).toLocaleDateString("en-US", {
                    year: "numeric",
                    month: "long",
                    day: "numeric"
                });

                const article = `
        <article class="news-article">
          <img src="${item.imageUrl || 'https://via.placeholder.com/400x250?text=No+Image'}" 
               alt="${item.title}" class="news-image">
          <div class="news-body">
            <div class="news-meta">
              <span class="news-date">ðŸ“… ${formattedDate}</span>
              <span class="news-category">${item.category || 'General'}</span>
            </div>
            <h3>${item.title}</h3>
            <p>${item.summary}</p>
            <a href="#" class="read-more">Read More â†’</a>
          </div>
        </article>
      `;
                newsContainer.insertAdjacentHTML("beforeend", article);
            });

            // Hide button if no more news
            const loadMoreBtn = document.getElementById("loadMoreBtn");
            if (visibleCount >= allNews.length) {
                loadMoreBtn.style.display = "none";
            } else {
                loadMoreBtn.style.display = "block";
            }
        }

        // Load more button click
        document.getElementById("loadMoreBtn").addEventListener("click", () => {
            visibleCount += 3; // next 3 news items show
            renderNews();
        });

        // Run on page load
        document.addEventListener("DOMContentLoaded", loadNews);
    </script>
</body>

</html>